preventMMGeneration

importMetamodel "http://www.mod4j.org/service" ;


ServiceModel:
	(description=STRING )?
	"Service" name = ID
	(dtoReferences+=DtoReference)*
	(
	    (crudServices += CrudService)
	    | (methods+= ServiceMethod)
	)*
	;

Enum SpecialMethodType [MethodType]:
     CREATE="create"  | READ="read" | UPDATE="update" | DELETE="delete" 
     ;

Enum AssociationMethodType [MethodType] :
     ADDTO="add" | REMOVEFROM="remove" | GETFROM="get"
     ;

Enum AssociationToMethodType [MethodType] :
     ADDTO="add" 
     ;

Enum AssociationFromMethodType [MethodType] :
     REMOVEFROM="remove" 
     ;

Enum AssociationGetMethodType [MethodType] :
     GETFROM="get" 
     ;

DtoReference:
	(description=STRING )?
    "from" modelname=ID "import" name=ID 
    ;

ServiceMethod :
	(description=STRING )?
    (CustomMethod | SpecialMethod | AssociationMethod )
    ;

AssociationMethod :
    type=AssociationMethodType
    part=[DtoReference] "for" rolename=ID "of" main=[DtoReference]
	;
	
//AssociationToMethod [AssociationMethod] :
//    type=AssociationMethodType
//    part=[DtoReference] "to" rolename=ID "of" main=[DtoReference]
//    ;


//AssociationFromMethod [AssociationMethod] :
//    type=AssociationFromMethodType
//    part=[DtoReference] "from" rolename=ID "of" main=[DtoReference]
//    ;
    	
//AssociationGetMethod [AssociationMethod] :
//    type=AssociationGetMethodType
//    part=[DtoReference] "from" rolename=ID "of" main=[DtoReference]
//    ;
    	
CustomMethod:
	"method"
	name=ID
	("in"  (inParameters+=Parameter)*  )?
	("out" output=[DtoReference] )?
    ";" ;
     
Parameter:
    type=[DtoReference]
    name=ID 
    ;
    
SpecialMethod:
    type=SpecialMethodType
    name=ID
    "for" dto = [DtoReference]
    ";"
    ;
    
CrudService:
	(description=STRING )?
    name="crud" "for" dto =[DtoReference]
    ";"
    ;

