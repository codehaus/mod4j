/**
 * Initially generated by Mod4j at Thu Feb 26 16:47:50 CET 2009
 */
package org.company.recordshop.data.hibernate.spring;

import org.company.recordshop.data.OrderDao;
import org.company.recordshop.data.OrderLineDao;
import org.company.recordshop.domain.Order;
import org.company.recordshop.domain.OrderLine;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

/**
 * Order Data Access Object (DOA) Implementation. Responsible for Creating,
 * Reading, Updating and Deleting Order objects in the database. All database
 * access is done here.
 *  
 * @author Initially generated by Mod4j
 */
@Repository
public class OrderDaoImpl extends OrderDaoImplBase implements OrderDao {

    private final OrderLineDao orderlineDao;
    
	@Autowired
	public OrderDaoImpl(final SessionFactory sessionFactory, final OrderLineDao orderLineDao) {
		super(sessionFactory);
		this.orderlineDao = orderLineDao; 
	}

    /** 
     * Workaround for a cascading delete of all orderlines attached the order to delete.
     * @see org.company.recordshop.data.hibernate.spring.OrderDaoImplBase#delete(org.company.recordshop.domain.Order)
     */
    @Override
    public void delete(Order object) {
        
        
        for (OrderLine line: object.getOrderLines()){
            orderlineDao.delete(line);
        }
        super.delete(object);
    }
    
    
}
